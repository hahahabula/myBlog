---
title: "S1.推荐系统简介"
description: "王树森老师视频中介绍有关推荐系统的消费侧指标、实验流程和链路的内容"
date: 2025/2/13
image: "./images/logo.png"
categories: [搜广推, 王树森]
---

# 短期消费侧指标

1.  点击率:=点击次数/曝光次数
2.  点赞率:=点赞次数/点击次数
3.  收藏率:=收藏次数/点击次数
4.  转发率:=转发次数/点击次数
5.  阅读完成率:=滑动到底次数/点击次数 $\times$ f(笔记长度)

+---------------------+------------------------+----------------+
| 用户规模            | 消费                   | 发布           |
+:====================+:=======================+:===============+
| -   日活用户数(DAU) | -   人均使用推荐的时长 | -   发布渗透率 |
|                     |                        |                |
| -   月活用户数(MAU) | -   人均阅读笔记数量   | -   人均发布量 |
+---------------------+------------------------+----------------+

: **北极星指标**

# 实验流程

```{mermaid}
flowchart LR
    A(离线实验) --> B(小流量A/B测试)
    B --> C(全流量A/B测试)
```

1. 离线实验
: 收集历史数据，在历史数据上做训练、测试、算法没有部署到产品中，没有跟用户交互，离线实验不如线上实验可靠

2. 小流量A/B测试
: 把算法部署到实际产品中，用户实际跟算法做交互。

# 推荐系统的链路

```{mermaid}
flowchart LR
    A[(几亿物品)] --> B((召回))
    B --> |几千物品| C((粗排))
    subgraph 排序
        C
        D
    end
    C --> |几百物品| D((精排))
    D --> |几百物品| E((重排))
    E --> |几十物品| 完成
```

a) 粗排
: 较小的机器学习模型

b) 精排
: 较复杂的神经网络

c) 召回通道
: 协同过滤、双塔模型、关注的作者等

```{mermaid}
flowchart LR
    A[(几亿物品)] --> |召回通道1| B[(几百)]
    A --> |召回通道2| C[(几百)]
    A --> |...| D[(几百)]
    A --> |召回通道10| E[(几百)]
    B & C & D & E --> F{粗排,精排}
    F --> G[(几百)]
    G --> H{重排} 
    H --> H1((物品1))
    H --> H2((物品2))
    H --> H3((...))
    H --> H4((物品80))
```

## 粗排、精排
```{mermaid}
flowchart LR
    a_1[用户特征] --> b{神经网络}
    a_2[物品特征] --> b
    a_3[统计特征] --> b
    b --> |预测| d[点击率]
    d --> 排序分数
```

## 重排

1. 做多样性抽样(MMR,DDP)从几百篇中选出几十篇
2. 用规则打散相似笔记
3. 插入广告、运营推广内容并根据生产要求调整排序